@layout PrintLayout

@page "/ModulePrinting/BuktiTrfAntarBank/{id:int}"
@using eSoft.CashBank.Model
@using eSoft.CashBank.View
@using eSoft.Fungsi.Function

@inject ICashBankServices service
@inject NavigationManager navigationmanager


<div class="dontprint" style="display:none inline">
    <br />
    &emsp;
    @if (@TransAll.Pajak)
    {
        <NavLink href="/ModuleBank/TransAntarBank" class="btn btn-primary btn-lg">&nbsp;Back&nbsp;</NavLink>
    }
    else
    {
        <NavLink href="/ModuleBank/TransAntarBank" class="btn btn-primary btn-lg">&nbsp;Back&nbsp;</NavLink>
    }
    &emsp;
    <NavLink class="btn btn-success btn-lg" onclick="window.print()">&nbsp; Cetak &nbsp;</NavLink>
    &emsp;
    @*<NavLink @onclick="() => OpenPrint(Id)" class="btn btn-primary btn-lg">&nbsp;Surat Jalan&nbsp;</NavLink>&emsp;*@
</div>



<table width="100%" border="0" cellspacing="0" cellpadding="0">

    <tr>
        <td colspan="2">&nbsp;</td>
    </tr>

    <tr>
        <td width="70%">
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td style="font-family:Verdana, Geneva, sans-serif; font-weight:600; font-size:14px;">@Perusahaan</td>
                            </tr>
                            <tr>
                                <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:12px;">@Alamat</td>
                            </tr>
                            <tr>
                                <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:6px;">&nbsp;</td>
                            </tr>


                           @* <tr>
                                <td>
                                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                        <tr>
                                            <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:11px;">@TransAll.NamaSup</td>
                                        </tr>
                                        <tr>
                                            <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:11px;">@($"{@customers.Alamat} \n {customers.Kota}") </td>
                                        </tr>
                                        <tr>
                                            <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:6px;">&nbsp;</td>
                                        </tr>
                                    </table>
                                </td>

                            </tr>*@


                        </table>
                    </td>
                </tr>
            </table>
        </td>

        <td width="30%" valign="top">
            <table width="100%" border="0" cellspacing="0" cellpadding="0" align="right">

                <tr>
                    <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px;" align="left">Tanggal.&nbsp;</td>
                    <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px;" align="right">@TransAll.Tanggal.ToShortDateString()</td>
                </tr>

                <tr>
                    <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px;" align="left">No. Bukti.</td>
                    <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px;" align="right">@TransAll.DocNo</td>
                </tr>

            </table>
        </td>
    </tr>
    @*<tr>
        <td colspan="2" style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:11px;">
            <span>Jumlah yang dibayarkan @kurs @TransAll.Jumlah.ToString("N") (@currency.ToString("N")) / @bank</span>
        </td>
    </tr>*@
    <tr>
        <td colspan="2" style="font-family:Verdana, Geneva, sans-serif; font-weight:600; font-size:15px;" align="center">
            @Title
        </td>
    </tr>


    <tr>
        <td colspan="2">
            <table width="100%" border="0" cellspacing="0" cellpadding="4">
                <tr>
                    <td colspan="6" style="font-family:Verdana, Geneva, sans-serif; font-weight:600; font-size:16px; border-top:1px solid #333; border-left:1px solid #333; border-right:1px solid #333; " align="center">
                    </td>
                </tr>

               
                   @for (int x = 0; x < 5; x++)
                    {
                        <tr>
                            <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px; border-left:1px solid #333; " align="center">&emsp;</td>
                            <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px; " align="center"></td>
                            <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px; " align="center"></td>
                            <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px;" align="center"></td>
                            <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px;" align="center"></td>
                            <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px;  border-right:1px solid #333;" align="center"></td>
                        </tr>
                        if (x == 3)
                        {
                            <tr>
                                <td colspan="6" style="font-family:Verdana, Geneva, sans-serif; font-weight:600; font-size:16px; border-left:1px solid #333; border-right:1px solid #333; " align="center">
                                    <span>Dari [@Kbank1] @bank1 Transfer ke [@Kbank2] @bank2 / @string.Format("{0:n2}", (currency)) </span>
                                </td>
                            </tr>
                        }
                    }
                 
                <tr>
                    <td colspan="6" style="font-family:Verdana, Geneva, sans-serif; font-weight:600; font-size:16px; border-left:1px solid #333; border-right:1px solid #333; " align="center">
                        <span>Jumlah yang ditransfer Rp. @string.Format("{0:n2}", (TransAll.Saldo)) / @string.Format("{0:n2}", (TransAll.KSaldo))</span>
                    </td>
                </tr>
                <tr>
                    <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px; border-bottom:1px solid #333;  border-left:1px solid #333; " align="center">&emsp;</td>
                    <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px; border-bottom:1px solid #333;  " align="center"></td>
                    <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px; border-bottom:1px solid #333;  " align="center"></td>
                    <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px; border-bottom:1px solid #333; " align="center"></td>
                    <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px; border-bottom:1px solid #333; " align="center"></td>
                    <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px; border-bottom:1px solid #333;   border-right:1px solid #333;" align="center"></td>
                </tr>





            </table>

        </td>
    </tr>
    <tr>
        <td colspan="2" valign="top">
            <p></p>
            <p>
                <table width="100%">
                    <tr>
                        <td width="100%">
                            <table width="100%" border="1" cellspacing="0" cellpadding="4" style="border-color:black">
                                <tr>
                                    <td style="font-family: Verdana, Geneva, sans-serif; font-weight: 300; font-size: 14px; color:black;border-right:1px solid #333;  " align="center">
                                        <span>Hormat Kami</span><br />
                                        <span>
                                            &emsp;
                                        </span> <br />
                                        <span>
                                            &emsp;
                                        </span>
                                    </td>
                                    <td style="font-family: Verdana, Geneva, sans-serif; font-weight: 300; font-size: 14px; color:black; border-right:1px solid #333; " align="center">
                                        <span>Penerima</span><br />
                                        <span>
                                            &emsp;
                                        </span> <br />
                                        <span>
                                            &emsp;
                                        </span>
                                    </td>
                                    <td style="font-family: Verdana, Geneva, sans-serif; font-weight: 300; font-size: 14px; color:black;  " align="center">
                                        <span>Supplier</span><br />
                                        <span>
                                            &emsp;
                                        </span> <br />
                                        <span>
                                            &emsp;
                                        </span>
                                    </td>
                                </tr>
                                @*<tr>

                                    </tr>*@
                            </table>
                        </td>

                    </tr>
                </table>

            </p>
        </td>


    </tr>
    <tr>
        <td colspan="2">&nbsp;</td>
    </tr>


    @*<tr>
        <td style="font-family:Verdana, Geneva, sans-serif; font-weight:600; font-size:13px;" colspan="2">Please Note:</td>
        </tr>
        <tr>
        <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px;" colspan="2">Dear Consumer, the bill payment will reflect in next 48 hours or in the next billing cycle, at your service provider&rsquo;s end. Please  contact paytm customer support for any queries regarding this order.</td>
        </tr>*@
    <tr>
        <td colspan="2">&nbsp;</td>
    </tr>
    @*<tr>
        <td style="font-family:Verdana, Geneva, sans-serif; font-weight:600; font-size:13px;" colspan="2">DECLARATION:</td>
        </tr>
        <tr>
        <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px;" colspan="2">This is not an invoice but only a confirmation of the receipt of the amount paid against for the service as described above.  Subject to terms and conditions mentioned at paytm.com</td>
        </tr>
        <tr>
        <td colspan="2">&nbsp;</td>
        </tr>
        <tr>
        <td colspan="2">&nbsp;</td>
        </tr>
        <tr>
        <td style="font-family:Verdana, Geneva, sans-serif; font-weight:300; font-size:13px;" colspan="2" align="center">(This is computer generated receipt and does not require physical signature.)  <br />B-121 Sector 5, Noida, Uttar Pradesh 201301,<br />  Service tax registration number: AAACO4007ASD002<br />  Paytm Order ID :12252016430</td>
        </tr>
        <tr>
        <td colspan="2">&nbsp;</td>
        </tr>
        <tr>
        <td colspan="2">&nbsp;</td>
        </tr>
        <tr>
        <td colspan="2">&nbsp;</td>
        </tr>*@
</table>




@code {
    [Parameter] public string Title { get; set; } = "TRANSFER ANTAR BANK";
    [Parameter] public int Id { get; set; }
    [Parameter] public string Cetak { get; set; }

    private TransferView Transh = new TransferView();
    private CbTransfer TransAll = new CbTransfer() ;
    private string bank1;
    private string bank2;
    private string Kbank1;
    private string Kbank2;
 //   private List<CbBank> banks;


    private string enabled { get; set; }


    public string Perusahaan { get; set; }
    public string Alamat { get; set; }
    public string Rekening1 { get; set; }
    public string Rekening2 { get; set; }
    public decimal currency { get; set; }
    public string bank { get; set; } = " ";
    public string kurs { get; set; } = "Rp.";

    private int noUrut { get; set; } = 1;

    protected override void OnInitialized()
    {
        // Transh.Tanggal = DateTime.Now;

        //LoadBank();
        //LoadSrcCode();
        LoadTrans();
        //  StateHasChanged();
    }

    // void LoadBank()
    //{
    //    banks = service.GetBank();
    ////}


    void LoadTrans()
    {
        TransAll = service.GetTransferId(Id);
        currency = TransAll.KValue;
        bank1 = service.GetBankKd(TransAll.KodeBank1).NmBank;
        bank2 = service.GetBankKd(TransAll.KodeBank2).NmBank;
        Kbank1 = service.GetBankKd(TransAll.KodeBank1).Kurs;
        Kbank2 = service.GetBankKd(TransAll.KodeBank2).Kurs;
    }


   

   

    private void OpenPrint(int xKdBank)
    {
        navigationmanager.NavigateTo($"/ModulePrinting/PrintTrfBank/{xKdBank}");
    }
}